A = LOOP(IF(A,B new insert) CALL(B)) C del D;
B = new contains CALL(new contains contains IF(A, B C)) B new contains;
C = D new C IF(new insert D, new contains B);
D = IF(new del new LOOP(C) contains remove insert remove, B remove);