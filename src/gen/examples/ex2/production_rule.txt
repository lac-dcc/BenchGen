A = new LOOP(insert contains IF(CALL(C) new,A)) new;
B = CALL(A) contains LOOP(remove contains D) CALL(new B) new new;
C = LOOP(new D IF(A,B) contains new);
D = IF(new C CALL(B) new A new, D CALL(new LOOP(remove C)) new);